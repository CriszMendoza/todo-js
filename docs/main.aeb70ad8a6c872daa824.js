(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String((new Date).getTime()),o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(new Date).toISOString();t(this,n),this.tarea=e,this.id=r,this.completado=o,this.creado=a}var r,o,a;return r=n,a=[{key:"fromJson",value:function(t){return new n(t.tarea,t.id,t.completado,t.creado)}}],(o=null)&&e(r.prototype,o),a&&e(r,a),Object.defineProperty(r,"prototype",{writable:!1}),n}();function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,i=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(t){var e=t.tarea,n=t.id,r=t.completado;return"\n\t<li class=".concat(r&&"completed"," data-id=").concat(n,'>\n\t\t<div class="view">\n\t\t\t<input class="toggle" type="checkbox" ').concat(r&&"checked",">\n\t\t\t<label>").concat(e,'</label>\n\t\t\t<button class="destroy"></button>\n\t\t</div>\n\t\t<input class="edit" value="Create a TodoMVC template">\n\t</li>\n\t')};function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.todos=this.cargarLocalStorage()}var e,o,i;return e=t,(o=[{key:"nuevoTodo",value:function(t){this.todos.unshift(t),this.guardarLocalStorage()}},{key:"eliminarTodo",value:function(t){this.todos=this.todos.filter((function(e){return e.id!==t})),this.guardarLocalStorage()}},{key:"eliminarCompletados",value:function(){this.todos=this.todos.filter((function(t){return!t.completado})),this.guardarLocalStorage()}},{key:"actualizarTodo",value:function(t){var e,n=r(this.todos);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.id===t){o.completado=!o.completado;break}}}catch(t){n.e(t)}finally{n.f()}this.guardarLocalStorage()}},{key:"contarPendientes",value:function(){return this.todos.filter((function(t){return!1===t.completado})).length}},{key:"guardarLocalStorage",value:function(){localStorage.setItem("todoList",JSON.stringify(this.todos))}},{key:"cargarLocalStorage",value:function(){return(JSON.parse(localStorage.getItem("todoList"))||[]).map((function(t){return n.fromJson(t)}))}}])&&a(e.prototype,o),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()),s=document.querySelector(".todo-list"),d=document.querySelector(".new-todo"),f=document.querySelector(".clear-completed"),y=document.querySelector(".todo-count strong");d.addEventListener("keyup",(function(t){var e=t.target.value.trim();if(13===t.keyCode){if(e.length>0){var r=new n(e);u.nuevoTodo(r),s.insertAdjacentHTML("afterbegin",i(r))}d.value=""}y.textContent=u.contarPendientes()})),s.addEventListener("click",(function(t){var e=t.target.localName,n=t.target.parentElement.parentElement,r=n.getAttribute("data-id");"button"===e?(u.eliminarTodo(r),s.removeChild(n)):"input"===e&&(u.actualizarTodo(r),n.classList.toggle("completed"),n.checked=!1),y.textContent=u.contarPendientes()})),f.addEventListener("click",(function(){var t,e=l(document.querySelectorAll(".completed"));try{for(e.s();!(t=e.n()).done;){var n=t.value;s.removeChild(n)}}catch(t){e.e(t)}finally{e.f()}u.eliminarCompletados(),y.textContent=u.contarPendientes()})),document.addEventListener("click",(function(t){if(t.target.className.includes("filtro")){var e=t.target.textContent,n=s.children;switch(document.querySelectorAll(".selected").forEach((function(t){return t.classList.remove("selected")})),t.target.classList.add("selected"),e){case"Todos":var r,o=l(n);try{for(o.s();!(r=o.n()).done;){r.value.style.display="block"}}catch(t){o.e(t)}finally{o.f()}break;case"Pendientes":var a,i=l(n);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.className.includes("completed")?c.style.display="none":c.style.display="block"}}catch(t){i.e(t)}finally{i.f()}break;case"Completados":var u,d=l(n);try{for(d.s();!(u=d.n()).done;){var f=u.value;f.className.includes("completed")?f.style.display="block":f.style.display="none"}}catch(t){d.e(t)}finally{d.f()}}}})),document.addEventListener("DOMContentLoaded",(function(){var t=u.todos;if(t.length>0){var e,n=l(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;s.insertAdjacentHTML("beforeend",i(r))}}catch(t){n.e(t)}finally{n.f()}}y.textContent=u.contarPendientes()}))})();